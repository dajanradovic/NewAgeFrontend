{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Dajan\\\\new-age-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Dajan\\\\new-age-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Dajan\\\\new-age-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Dajan\\\\new-age-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import'./index.css';import axios from'axios';import DajanHeader from'./dajanHeader';import{socketListen}from'./socketListen';var Checkout=/*#__PURE__*/function(_React$Component){_inherits(Checkout,_React$Component);var _super=_createSuper(Checkout);function Checkout(){var _this;_classCallCheck(this,Checkout);_this=_super.call(this);_this.confirmOrder=function(){if(_this.state.table==''){_this.setState({tableError:true});}else{axios.post('http://newagebackend.xyz/api/newOrder',{contents:_this.props.activeOrder,price:_this.props.total,email:_this.state.email,table:_this.state.table}).then(function(response){socketListen();_this.setState({orderCompletedNote:true});}).catch(function(error){console.log(error);});}};_this.pickTable=function(e){_this.setState({table:e.target.value});};_this.cancelOrder=function(){_this.props.emptyCart();_this.props.history.push('/');};_this.setEmail=function(e){if(e.target.name=='email'){_this.setState({email:e.target.value});}};_this.state={email:'',orderCompletedNote:false,table:'',tableError:false};return _this;}_createClass(Checkout,[{key:\"render\",value:function render(){//let orderFinalPrice=0;\nvar order=this.props.activeOrder.map(function(item){return/*#__PURE__*/React.createElement(\"p\",{className:\"orderListItem\",key:item.id},item.name,/*#__PURE__*/React.createElement(\"span\",null,item.price,\" kn\"));});return/*#__PURE__*/React.createElement(\"div\",{className:\"checkOutMain\"},!this.state.orderCompletedNote&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"h3\",null,\"Order summary:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"orderReview\"},order,/*#__PURE__*/React.createElement(\"p\",{className:\"total\"},\"TOTAL: \",/*#__PURE__*/React.createElement(\"span\",null,this.props.total,\" kn\"))),/*#__PURE__*/React.createElement(\"h6\",{className:\"enterEmailH6\"},\"Enter your email address in the field below and you will get your receipt e-mailed to you (optional)\"),/*#__PURE__*/React.createElement(\"input\",{className:\"sendInvoiceInput\",type:\"email\",name:\"email\",value:this.state.email,onChange:this.setEmail}),/*#__PURE__*/React.createElement(\"h6\",{className:\"enterEmailH6\"},\"Pick your table (written on the table itself) (required)\"),/*#__PURE__*/React.createElement(\"select\",{value:this.state.table,onChange:this.pickTable,name:\"table\",id:\"table\"},/*#__PURE__*/React.createElement(\"option\",{value:\"\"},\"Choose your table\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Table 1\"},\"Table 1\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Table 2\"},\"Table 2\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Table 3\"},\"Table 3\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Table 4\"},\"Table 4\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Table 5\"},\"Table 5\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Table 6\"},\"Table 6\"),/*#__PURE__*/React.createElement(\"option\",{value:\"Table 7\"},\"Table 7\")),this.state.tableError&&/*#__PURE__*/React.createElement(\"p\",{id:\"tableError\"},\"You need to pick a table to confirm the order\"),/*#__PURE__*/React.createElement(\"button\",{className:\"confirmOrderButton\",onClick:this.confirmOrder},\"Confirm order\"),/*#__PURE__*/React.createElement(\"button\",{className:\"cancelButton\",onClick:this.cancelOrder},\"Cancel\")),this.state.orderCompletedNote&&/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"button\",{className:\"goToMainPageButton\",onClick:this.cancelOrder},\"Go To The Main Page\"),/*#__PURE__*/React.createElement(\"h2\",{className:\"orderCompletedNote\"},\"You have completed and order. Water will be brining it to you in a minute! \")));}}]);return Checkout;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{activeOrder:state.activeOrder,total:state.activeOrderTotal};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{emptyCart:function emptyCart(){dispatch({type:'EMPTY_CART'});}};};export default connect(mapStateToProps,mapDispatchToProps)(Checkout);","map":{"version":3,"sources":["C:/Users/Dajan/new-age-frontend/src/checkOut.js"],"names":["React","Component","connect","axios","DajanHeader","socketListen","Checkout","confirmOrder","state","table","setState","tableError","post","contents","props","activeOrder","price","total","email","then","response","orderCompletedNote","catch","error","console","log","pickTable","e","target","value","cancelOrder","emptyCart","history","push","setEmail","name","order","map","item","id","mapStateToProps","activeOrderTotal","mapDispatchToProps","dispatch","type"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport { connect} from 'react-redux';\r\nimport './index.css';\r\nimport axios from 'axios';\r\nimport DajanHeader from './dajanHeader';\r\nimport {socketListen} from './socketListen';\r\n\r\n\r\n\r\n\r\n\r\nclass Checkout extends React.Component {\r\n  constructor(){\r\n    super();\r\n\r\n    this.state={\r\n\r\n    email:'',\r\n    orderCompletedNote:false,\r\n    table:'',\r\n    tableError:false\r\n    \r\n    }\r\n   \r\n    }\r\n\r\nconfirmOrder = () => {\r\n    if(this.state.table==''){\r\n\r\n     this.setState({\r\n\r\n      tableError:true\r\n     })\r\n    }\r\n\r\n    else{\r\n    \r\n  axios.post('http://newagebackend.xyz/api/newOrder', {\r\n    contents: this.props.activeOrder,\r\n    price: this.props.total,\r\n    email:this.state.email,\r\n    table:this.state.table\r\n  })\r\n  .then( response => {\r\n\r\n    socketListen();\r\n    this.setState({\r\n\r\n      orderCompletedNote:true\r\n    })\r\n  })\r\n  .catch(function (error) {\r\n    console.log(error);\r\n  });\r\n    }\r\n}\r\n\r\npickTable = (e) => {\r\n\r\n  this.setState({\r\n\r\n    table: e.target.value\r\n  })\r\n}\r\n\r\n\r\ncancelOrder = () =>{\r\n\r\n  this.props.emptyCart();\r\n  this.props.history.push('/');\r\n}\r\n\r\nsetEmail = (e) =>{\r\n\r\n    if(e.target.name == 'email'){\r\n\r\n        this.setState({\r\n\r\n        email:e.target.value\r\n    })\r\n}\r\n}\r\n    \r\n\r\n  render(){\r\n\r\n    //let orderFinalPrice=0;\r\n    let order = this.props.activeOrder.map(item =>{\r\n          \r\n       return  <p className=\"orderListItem\" key={item.id}>{item.name}<span>{item.price} kn</span></p>\r\n    });\r\n    return (\r\n    <div className=\"checkOutMain\">\r\n     {!this.state.orderCompletedNote && <div>\r\n        <h3>Order summary:</h3>\r\n        <div className=\"orderReview\">\r\n            {order}\r\n\r\n        <p className=\"total\">TOTAL: <span>{this.props.total} kn</span></p>\r\n    </div>\r\n\r\n    <h6 className=\"enterEmailH6\">Enter your email address in the field below and you will get your receipt e-mailed to you (optional)</h6>\r\n    <input className=\"sendInvoiceInput\" type=\"email\" name=\"email\" value={this.state.email} onChange={this.setEmail}/>\r\n\r\n    <h6 className=\"enterEmailH6\">Pick your table (written on the table itself) (required)</h6>\r\n    <select value={this.state.table} onChange={this.pickTable}name=\"table\" id=\"table\">\r\n    <option value='' >Choose your table</option>\r\n    <option value=\"Table 1\">Table 1</option>\r\n    <option value=\"Table 2\">Table 2</option>\r\n    <option value=\"Table 3\">Table 3</option>\r\n    <option value=\"Table 4\">Table 4</option>\r\n    <option value=\"Table 5\">Table 5</option>\r\n    <option value=\"Table 6\">Table 6</option>\r\n    <option value=\"Table 7\">Table 7</option>\r\n</select>\r\n{this.state.tableError && <p id=\"tableError\">You need to pick a table to confirm the order</p>}\r\n\r\n    <button className=\"confirmOrderButton\" onClick={this.confirmOrder}>Confirm order</button>\r\n    <button className=\"cancelButton\" onClick={this.cancelOrder}>Cancel</button>\r\n    </div>\r\n }\r\n    {this.state.orderCompletedNote && <div><button className=\"goToMainPageButton\" onClick={this.cancelOrder}>Go To The Main Page</button><h2 className=\"orderCompletedNote\">You have completed and order. Water will be brining it to you in a minute! </h2></div>}\r\n    </div>\r\n  );\r\n    }\r\n}\r\n\r\nconst mapStateToProps = (state) =>{\r\n\r\n    return{\r\n        activeOrder: state.activeOrder,\r\n        total:state.activeOrderTotal\r\n        \r\n  \r\n  \r\n  \r\n      \r\n    }\r\n  \r\n  }\r\nconst mapDispatchToProps = (dispatch) =>{\r\n\r\n  return{\r\n        \r\n       \r\n\r\n    emptyCart:()=>{dispatch({type: 'EMPTY_CART'})}\r\n\r\n\r\n      \r\n\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(Checkout);\r\n"]},"metadata":{},"sourceType":"module"}