{"ast":null,"code":"import _classCallCheck from\"C:\\\\Users\\\\Dajan\\\\new-age-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/classCallCheck\";import _createClass from\"C:\\\\Users\\\\Dajan\\\\new-age-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createClass\";import _inherits from\"C:\\\\Users\\\\Dajan\\\\new-age-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/inherits\";import _createSuper from\"C:\\\\Users\\\\Dajan\\\\new-age-frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{connect}from'react-redux';import'./index.css';import axios from'axios';import{fetchAllOrders as _fetchAllOrders}from'./actions/fetchAllOrders';var OrderModal=/*#__PURE__*/function(_React$Component){_inherits(OrderModal,_React$Component);var _super=_createSuper(OrderModal);function OrderModal(){var _this;_classCallCheck(this,OrderModal);_this=_super.call(this);_this.closeModal=function(){_this.props.closeModal();};_this.completeOrder=function(){var headers={'Authorization':'Bearer '+localStorage.getItem('token')};var body={order:_this.props.order};axios.post('http://newagebackend.xyz/api/completeOrder',body,{headers:headers}).then(function(response){console.log(response);_this.props.fetchAllOrders();_this.props.closeModal();}).catch(function(error){console.log(error);});};return _this;}_createClass(OrderModal,[{key:\"render\",value:function render(){if(this.props.order.contents==undefined)return null;var orderContents=this.props.order.contents.map(function(item,index){return/*#__PURE__*/React.createElement(\"p\",{className:\"orderListItem\",key:item.id},item.name,/*#__PURE__*/React.createElement(\"span\",null,item.price,\" kn\"));});return/*#__PURE__*/React.createElement(\"div\",{id:\"myModal\",style:{display:this.props.openModal?'block':'none'},className:\"modal\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-content\"},/*#__PURE__*/React.createElement(\"div\",{className:\"modal-header\"},/*#__PURE__*/React.createElement(\"span\",{className:\"close\",onClick:this.closeModal},\"\\xD7\"),/*#__PURE__*/React.createElement(\"span\",{className:\"orderId\"},/*#__PURE__*/React.createElement(\"span\",{className:\"descriptionSpan\"},\"Order id:\"),this.props.order._id)),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-body\"},/*#__PURE__*/React.createElement(\"h3\",null,\"Order summary:\"),/*#__PURE__*/React.createElement(\"div\",{className:\"orderReview\"},orderContents,/*#__PURE__*/React.createElement(\"p\",{className:\"total\"},\"TOTAL: \",/*#__PURE__*/React.createElement(\"span\",{style:{marginRight:\"10px\"}},this.props.order.price,\" kn\")))),/*#__PURE__*/React.createElement(\"div\",{className:\"modal-footer\"},/*#__PURE__*/React.createElement(\"span\",{className:\"orderId\"},/*#__PURE__*/React.createElement(\"span\",{className:\"descriptionSpan\"},\"Time:\"),\" \",this.props.order.time),!this.props.order.completed&&/*#__PURE__*/React.createElement(\"span\",{className:\"waiterOrderCompleteButton\",onClick:this.completeOrder},\"Complete\"))));}}]);return OrderModal;}(React.Component);var mapStateToProps=function mapStateToProps(state){return{openModal:state.openModal,order:state.modalOrder};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{closeModal:function closeModal(){dispatch({type:'CLOSE_MODAL'});},fetchAllOrders:function fetchAllOrders(){dispatch(_fetchAllOrders());}};};export default connect(mapStateToProps,mapDispatchToProps)(OrderModal);","map":{"version":3,"sources":["C:/Users/Dajan/new-age-frontend/src/orderModal.js"],"names":["React","Component","connect","axios","fetchAllOrders","OrderModal","closeModal","props","completeOrder","headers","localStorage","getItem","body","order","post","then","response","console","log","catch","error","contents","undefined","orderContents","map","item","index","id","name","price","display","openModal","_id","marginRight","time","completed","mapStateToProps","state","modalOrder","mapDispatchToProps","dispatch","type"],"mappings":"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","sourcesContent":["import React, {Component} from 'react';\r\nimport { connect} from 'react-redux';\r\nimport './index.css';\r\nimport axios from 'axios';\r\nimport {fetchAllOrders} from './actions/fetchAllOrders';\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nclass OrderModal extends React.Component {\r\n  constructor(){\r\n    super();\r\n\r\n  \r\n   \r\n    }\r\ncloseModal= () =>{\r\n\r\n    this.props.closeModal();\r\n}\r\n\r\n\r\ncompleteOrder = () =>{\r\n\r\n  const headers={\r\n    'Authorization': 'Bearer '+localStorage.getItem('token')\r\n      \r\n  }\r\n  const body={\r\n      \r\n    order:  this.props.order\r\n    \r\n  }\r\n  \r\n  \r\n  axios.post('http://newagebackend.xyz/api/completeOrder', body, {\r\n    headers: headers\r\n   \r\n}\r\n    \r\n  )\r\n  .then( response => {\r\n\r\n    console.log(response);\r\n    this.props.fetchAllOrders();\r\n    this.props.closeModal();\r\n\r\n    \r\n  })\r\n  .catch(function (error) {\r\n    console.log(error);\r\n  });\r\n    }\r\n\r\n\r\n\r\n  render(){\r\n    if (this.props.order.contents == undefined)\r\n    return null;\r\n\r\n    \r\n  let orderContents = this.props.order.contents.map((item, index) =>{\r\n    return  <p className=\"orderListItem\" key={item.id}>{item.name}<span>{item.price} kn</span></p>\r\n\r\n   });\r\n   \r\n    return (\r\n        <div id=\"myModal\" style={{ display: this.props.openModal ? 'block': 'none'}}className=\"modal\">\r\n        <div className=\"modal-content\">\r\n        <div className=\"modal-header\">\r\n          <span className=\"close\" onClick={this.closeModal}>&times;</span>\r\n          <span className=\"orderId\"><span className=\"descriptionSpan\">Order id:</span>{this.props.order._id}</span>\r\n        </div>\r\n        <div className=\"modal-body\">\r\n        <h3>Order summary:</h3>\r\n        <div className=\"orderReview\">\r\n        {orderContents}\r\n\r\n        <p className=\"total\">TOTAL: <span style={{marginRight:\"10px\"}}>{this.props.order.price} kn</span></p>\r\n    </div>\r\n        </div>\r\n        <div className=\"modal-footer\">\r\n        <span className=\"orderId\"><span className=\"descriptionSpan\">Time:</span> {this.props.order.time}</span>{!this.props.order.completed && <span className=\"waiterOrderCompleteButton\" onClick={this.completeOrder}>Complete</span>}\r\n        </div>\r\n      </div>\r\n      </div>\r\n  \r\n    )\r\n}\r\n}\r\nconst mapStateToProps = (state) =>{\r\n\r\n    return{\r\n       \r\n        \r\n      openModal:state.openModal,\r\n    order:state.modalOrder\r\n      \r\n    }\r\n  \r\n  }\r\nconst mapDispatchToProps = (dispatch) =>{\r\n\r\n  return{\r\n        \r\n       \r\n    \r\n\r\n    closeModal:()=>{dispatch({type: 'CLOSE_MODAL'})},\r\n    fetchAllOrders: () =>{dispatch(fetchAllOrders())}\r\n\r\n\r\n\r\n      \r\n\r\n  }\r\n}\r\n\r\n\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(OrderModal);\r\n"]},"metadata":{},"sourceType":"module"}