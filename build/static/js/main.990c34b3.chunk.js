(this["webpackJsonpnew-age-frontend"]=this["webpackJsonpnew-age-frontend"]||[]).push([[0],{122:function(e,t){},125:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),r=a(25),c=a.n(r),l=(a(15),a(5)),i=a(6),s=a(8),u=a(7),m=a(4),p=(a(18),a(42),a(9)),d=a.n(p),h=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).openCurtainMenu=function(){e.props.openMenu()},e}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",{className:"main"},"Welcome to NewAge Snack-Bar!",o.a.createElement("p",null," Click on the button to place your order!"),o.a.createElement("button",{id:"placeOrder",onClick:this.openCurtainMenu},"Place an order!"))}}]),a}(o.a.Component),O=Object(m.b)(null,(function(e){return{openMenu:function(){e({type:"OPEN_CURTAIN_MENU"})}}}))(h),E=a(3),b=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).emptyCart=function(){n.props.emptyCart()},n.goToCheckOut=function(){n.props.closeMenu(),n.props.history.push("/checkout")},n}return Object(i.a)(a,[{key:"render",value:function(){var e=0,t=this.props.activeOrder.map((function(t){return e+=t.price,o.a.createElement("p",{className:"orderListItem",key:t.id},t.name,o.a.createElement("span",null,t.price," kn"))}));return o.a.createElement("div",{className:"curtainMenuOrderList"},t,o.a.createElement("p",{className:"total"},"TOTAL: ",o.a.createElement("span",null,e," kn")),o.a.createElement("button",{className:"goToCheckOutButton",onClick:this.goToCheckOut},"Go to checkout"),o.a.createElement("button",{className:"eraseAllFromActiveOrderButton",onClick:this.emptyCart},"Erase all from cart"))}}]),a}(o.a.Component),f=Object(E.e)(Object(m.b)((function(e){return{activeOrder:e.activeOrder}}),(function(e){return{emptyCart:function(){e({type:"EMPTY_CART"})},closeMenu:function(){e({type:"CLOSE_CURTAIN_MENU"})}}}))(b)),g=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).closeCurtainMenu=function(){e.props.closeMenu()},e.addToBasket=function(t){e.props.addToCartItemSum(),e.props.addItemObjectToBasket(t)},e.openCurrentOrderListDiv=function(){e.setState({openCurrentOrderListDiv:!e.state.openCurrentOrderListDiv})},e.state={openCurrentOrderListDiv:!1},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.props.fetchAlcoholicDrinks(),this.props.fetchNonAlcoholicDrinks(),this.props.fetchBeer(),this.props.fetchSnacks();var e,t=document.getElementsByClassName("accordion");for(e=0;e<t.length;e++)t[e].addEventListener("click",(function(){this.classList.toggle("active");var e=this.nextElementSibling;e.style.maxHeight?e.style.maxHeight=null:e.style.maxHeight=e.scrollHeight+"px"}))}},{key:"render",value:function(){var e=this;if(void 0==this.props.alcoholicDrinks)return null;var t=this.props.alcoholicDrinks.map((function(t,a){return o.a.createElement("p",{className:"menuItem",key:a},t.name,o.a.createElement("span",{className:"dots"},".............."),o.a.createElement("span",{className:"prices"}," ",t.price," kn"),o.a.createElement("button",{className:"addButton",onClick:function(){return e.addToBasket(t)}},"Add"))})),a=this.props.nonAlcoholicDrinks.map((function(t,a){return o.a.createElement("p",{className:"menuItem",key:a},t.name,o.a.createElement("span",{className:"dots"},".............."),o.a.createElement("span",{className:"prices"}," ",t.price," kn"),o.a.createElement("button",{className:"addButton",onClick:function(){return e.addToBasket(t)}},"Add"))})),n=this.props.beer.map((function(t,a){return o.a.createElement("p",{className:"menuItem",key:a},t.name,o.a.createElement("span",{className:"dots"},".............."),o.a.createElement("span",{className:"prices"}," ",t.price," kn"),o.a.createElement("button",{className:"addButton",onClick:function(){return e.addToBasket(t)}},"Add"))})),r=this.props.snacks.map((function(t,a){return o.a.createElement("p",{className:"menuItem",key:a},t.name,o.a.createElement("span",{className:"dots"},".............."),o.a.createElement("span",{className:"prices"}," ",t.price," kn"),o.a.createElement("button",{className:"addButton",onClick:function(){return e.addToBasket(t)}},"Add"))}));return o.a.createElement("div",null,o.a.createElement("div",{id:"myNav",className:this.props.openMenu?"overlayOpen":"overlay"},o.a.createElement("div",{className:"curtainMenuCart",onClick:this.openCurrentOrderListDiv}),o.a.createElement("span",{className:"shoppingCartItemNumber"},this.props.sum),this.state.openCurrentOrderListDiv&&o.a.createElement(f,null),o.a.createElement("a",{className:"closebtn",onClick:this.closeCurtainMenu},"\xd7"),o.a.createElement("div",{className:"overlay-content"},o.a.createElement("div",{className:"accordion"},"Non-alcholic drinks"),o.a.createElement("div",{className:"panel"},a),o.a.createElement("div",{className:"accordion"},"Alcholic drinks"),o.a.createElement("div",{className:"panel"},t),o.a.createElement("div",{className:"accordion"},"Beer"),o.a.createElement("div",{className:"panel"},n),o.a.createElement("div",{className:"accordion"},"Snacks"),o.a.createElement("div",{className:"panel"},r))))}}]),a}(o.a.Component),k=Object(m.b)((function(e){return{openMenu:e.openMenu,alcoholicDrinks:e.alcoholicDrinks,nonAlcoholicDrinks:e.nonAlcoholicDrinks,beer:e.beer,snacks:e.snacks,sum:e.cartItemSum}}),(function(e){return{fetchAlcoholicDrinks:function(){e((function(e){d.a.get("http://newagebackend.xyz/api/alcoholicDrinks",{headers:{"Access-Control-Allow-Origin":"*"}}).then((function(t){console.log(t.data),e({type:"SET_ALCOHOLIC_DRINKS",alcoholicDrinks:t.data})})).catch((function(e){console.log(e)}))}))},fetchNonAlcoholicDrinks:function(){e((function(e){d.a.get("http://newagebackend.xyz/api/nonAlcoholicDrinks").then((function(t){console.log(t.data),e({type:"SET_NONALCOHOLIC_DRINKS",nonAlcoholicDrinks:t.data})})).catch((function(e){console.log(e)}))}))},fetchBeer:function(){e((function(e){d.a.get("http://newagebackend.xyz/api/beer").then((function(t){console.log(t.data),e({type:"SET_BEER",beer:t.data})})).catch((function(e){console.log(e)}))}))},fetchSnacks:function(){e((function(e){d.a.get("http://newagebackend.xyz/api/snacks").then((function(t){console.log(t.data),e({type:"SET_SNACKS",snacks:t.data})})).catch((function(e){console.log(e)}))}))},closeMenu:function(){e({type:"CLOSE_CURTAIN_MENU"})},addToCartItemSum:function(){e({type:"ADD_TO_CART_ITEM_SUM"})},addItemObjectToBasket:function(t){e({type:"ADD_ITEM_TO_BASKET",item:t})}}}))(g),v=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.call(this)}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(k,null),o.a.createElement(O,null))}}]),a}(o.a.Component),N=Object(m.b)(null,(function(e){return{}}))(v),y=a(37),C=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).goToGoogleAuth=function(){window.open("http://newagebackend.xyz/auth/google","_self")},n.logOut=function(){d.a.get("http://newagebackend.xyz/auth/logout",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(e){localStorage.removeItem("token"),n.props.loggedOut(),window.open("http://newage.apartments-radovic.website","_self")})).catch((function(e){console.log(e)}))},n}return Object(i.a)(a,[{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement("header",null,o.a.createElement("div",{className:"logo"}),o.a.createElement("div",{className:"titleName"},"NewAge Snack-Bar"),this.props.loggedIn?o.a.createElement("button",{onClick:this.logOut,className:"googleSignIn"},"LogOut"):o.a.createElement("button",{onClick:this.goToGoogleAuth,className:"googleSignIn"},"Sign-in with Google")))}}]),a}(o.a.Component),j=Object(m.b)((function(e){return{loggedIn:e.loggedIn}}),(function(e){return{loggedOut:function(){e({type:"USER_LOGGED_OUT"})}}}))(C),T=a(27),S=a.n(T),A=S()("http://newagebackend.xyz");var M=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).confirmOrder=function(){""==e.state.table?e.setState({tableError:!0}):d.a.post("http://newagebackend.xyz/api/newOrder",{contents:e.props.activeOrder,price:e.props.total,email:e.state.email,table:e.state.table}).then((function(t){A.emit("orderPlaced"),e.setState({orderCompletedNote:!0})})).catch((function(e){console.log(e)}))},e.pickTable=function(t){e.setState({table:t.target.value})},e.cancelOrder=function(){e.props.emptyCart(),e.props.history.push("/")},e.setEmail=function(t){"email"==t.target.name&&e.setState({email:t.target.value})},e.state={email:"",orderCompletedNote:!1,table:"",tableError:!1},e}return Object(i.a)(a,[{key:"render",value:function(){var e=this.props.activeOrder.map((function(e){return o.a.createElement("p",{className:"orderListItem",key:e.id},e.name,o.a.createElement("span",null,e.price," kn"))}));return o.a.createElement("div",{className:"checkOutMain"},!this.state.orderCompletedNote&&o.a.createElement("div",null,o.a.createElement("h3",null,"Order summary:"),o.a.createElement("div",{className:"orderReview"},e,o.a.createElement("p",{className:"total"},"TOTAL: ",o.a.createElement("span",null,this.props.total," kn"))),o.a.createElement("h6",{className:"enterEmailH6"},"Enter your email address in the field below and you will get your receipt e-mailed to you (optional)"),o.a.createElement("input",{className:"sendInvoiceInput",type:"email",name:"email",value:this.state.email,onChange:this.setEmail}),o.a.createElement("h6",{className:"enterEmailH6"},"Pick your table (written on the table itself) (required)"),o.a.createElement("select",{value:this.state.table,onChange:this.pickTable,name:"table",id:"table"},o.a.createElement("option",{value:""},"Choose your table"),o.a.createElement("option",{value:"Table 1"},"Table 1"),o.a.createElement("option",{value:"Table 2"},"Table 2"),o.a.createElement("option",{value:"Table 3"},"Table 3"),o.a.createElement("option",{value:"Table 4"},"Table 4"),o.a.createElement("option",{value:"Table 5"},"Table 5"),o.a.createElement("option",{value:"Table 6"},"Table 6"),o.a.createElement("option",{value:"Table 7"},"Table 7")),this.state.tableError&&o.a.createElement("p",{id:"tableError"},"You need to pick a table to confirm the order"),o.a.createElement("button",{className:"confirmOrderButton",onClick:this.confirmOrder},"Confirm order"),o.a.createElement("button",{className:"cancelButton",onClick:this.cancelOrder},"Cancel")),this.state.orderCompletedNote&&o.a.createElement("div",null,o.a.createElement("button",{className:"goToMainPageButton",onClick:this.cancelOrder},"Go To The Main Page"),o.a.createElement("h2",{className:"orderCompletedNote"},"You have completed and order. Water will be brining it to you in a minute! ")))}}]),a}(o.a.Component),_=Object(m.b)((function(e){return{activeOrder:e.activeOrder,total:e.activeOrderTotal}}),(function(e){return{emptyCart:function(){e({type:"EMPTY_CART"})}}}))(M),I=function(e){return function(e){console.log(localStorage.getItem("token")),d.a.get("http://newagebackend.xyz/api/getAllOrders",{headers:{Authorization:"Bearer "+localStorage.getItem("token")}}).then((function(t){console.log(t.data),e({type:"SET_ORDERS_FROM_DB",orders:t.data})})).catch((function(e){console.log(e)}))}},D=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).closeModal=function(){e.props.closeModal()},e.completeOrder=function(){var t={Authorization:"Bearer "+localStorage.getItem("token")},a={order:e.props.order};d.a.post("http://newagebackend.xyz/api/completeOrder",a,{headers:t}).then((function(t){console.log(t),e.props.fetchAllOrders(),e.props.closeModal()})).catch((function(e){console.log(e)}))},e}return Object(i.a)(a,[{key:"render",value:function(){if(void 0==this.props.order.contents)return null;var e=this.props.order.contents.map((function(e,t){return o.a.createElement("p",{className:"orderListItem",key:e.id},e.name,o.a.createElement("span",null,e.price," kn"))}));return o.a.createElement("div",{id:"myModal",style:{display:this.props.openModal?"block":"none"},className:"modal"},o.a.createElement("div",{className:"modal-content"},o.a.createElement("div",{className:"modal-header"},o.a.createElement("span",{className:"close",onClick:this.closeModal},"\xd7"),o.a.createElement("span",{className:"orderId"},o.a.createElement("span",{className:"descriptionSpan"},"Order id:"),this.props.order._id)),o.a.createElement("div",{className:"modal-body"},o.a.createElement("h3",null,"Order summary:"),o.a.createElement("div",{className:"orderReview"},e,o.a.createElement("p",{className:"total"},"TOTAL: ",o.a.createElement("span",{style:{marginRight:"10px"}},this.props.order.price," kn")))),o.a.createElement("div",{className:"modal-footer"},o.a.createElement("span",{className:"orderId"},o.a.createElement("span",{className:"descriptionSpan"},"Time:")," ",this.props.order.time),!this.props.order.completed&&o.a.createElement("span",{className:"waiterOrderCompleteButton",onClick:this.completeOrder},"Complete"))))}}]),a}(o.a.Component),w=Object(m.b)((function(e){return{openModal:e.openModal,order:e.modalOrder}}),(function(e){return{closeModal:function(){e({type:"CLOSE_MODAL"})},fetchAllOrders:function(){e(I())}}}))(D),L=S()("http://newagebackend.xyz"),B=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){var e;return Object(l.a)(this,a),(e=t.call(this)).openModal=function(t){e.props.openModal(t)},e}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this;console.log(this.props.match.params.key),localStorage.setItem("token",this.props.match.params.key),this.props.fetchAllOrders(),this.props.loggedIn(),L.on("orderReceived",(function(){e.props.fetchAllOrders()}))}},{key:"render",value:function(){var e=this,t=this.props.orders.map((function(t,a){if(t.completed)return o.a.createElement("li",{className:"latestOrders",onClick:function(){return e.openModal(t)},key:a},t.time,o.a.createElement("span",null),o.a.createElement("span",{className:""}," ",t._id," "))})),a=this.props.orders.map((function(t,a){if(!t.completed)return o.a.createElement("li",{className:"latestOrders",onClick:function(){return e.openModal(t)},key:a},t.time,o.a.createElement("span",null),o.a.createElement("span",{className:""}," ",t._id," "))}));return o.a.createElement("div",{className:"checkOutMain"},o.a.createElement("h2",{className:"ordersTitle"},"Pending orders"),o.a.createElement("ul",null,a),o.a.createElement("h2",{className:"ordersTitle"},"Competed orders"),o.a.createElement("ul",null,t),o.a.createElement(w,null))}}]),a}(o.a.Component),R=Object(m.b)((function(e){return{orders:e.orders}}),(function(e){return{fetchAllOrders:function(){e(I())},loggedIn:function(){e({type:"USER_LOGGED_IN"})},openModal:function(t){e({type:"OPEN_MODAL",item:t})}}}))(B),x=function(e){Object(s.a)(a,e);var t=Object(u.a)(a);function a(){return Object(l.a)(this,a),t.call(this)}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e,t=document.getElementsByClassName("accordion");for(e=0;e<t.length;e++)t[e].addEventListener("click",(function(){this.classList.toggle("active");var e=this.nextElementSibling;e.style.maxHeight?e.style.maxHeight=null:e.style.maxHeight=e.scrollHeight+"px"}))}},{key:"render",value:function(){return o.a.createElement("div",null,o.a.createElement(k,null),o.a.createElement(j,null),o.a.createElement(y.a,null,o.a.createElement(E.a,{exact:!0,path:"/",component:N}),o.a.createElement(E.a,{exact:!0,path:"/checkout",component:_}),o.a.createElement(E.a,{exact:!0,path:"/desk/:key",component:R})))}}]),a}(o.a.Component),U=Object(m.b)(null,(function(e){return{}}))(x);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var z=a(22),H=a(17),G=a(1),P={alcoholicDrinks:[],nonAlcoholicDrinks:[],beer:[],snacks:[],openMenu:!1,cartItemSum:0,activeOrder:[],activeOrderTotal:0,orders:[],openModal:!1,modalOrder:{},loggedIn:!1},K=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;return"SET_ORDERS_FROM_DB"===t.type?Object(G.a)(Object(G.a)({},e),{},{orders:Object(H.a)(t.orders)}):"SET_ALCOHOLIC_DRINKS"===t.type?Object(G.a)(Object(G.a)({},e),{},{alcoholicDrinks:Object(H.a)(t.alcoholicDrinks)}):"SET_NONALCOHOLIC_DRINKS"===t.type?Object(G.a)(Object(G.a)({},e),{},{nonAlcoholicDrinks:Object(H.a)(t.nonAlcoholicDrinks)}):"SET_BEER"===t.type?Object(G.a)(Object(G.a)({},e),{},{beer:Object(H.a)(t.beer)}):"SET_SNACKS"===t.type?Object(G.a)(Object(G.a)({},e),{},{snacks:Object(H.a)(t.snacks)}):"ADD_ITEM_TO_BASKET"===t.type?Object(G.a)(Object(G.a)({},e),{},{activeOrder:[].concat(Object(H.a)(e.activeOrder),[t.item]),activeOrderTotal:e.activeOrderTotal+t.item.price}):"EMPTY_CART"===t.type?Object(G.a)(Object(G.a)({},e),{},{activeOrder:[],cartItemSum:0,activeOrderTotal:0}):"OPEN_CURTAIN_MENU"===t.type?Object(G.a)(Object(G.a)({},e),{},{openMenu:!0}):"OPEN_MODAL"===t.type?Object(G.a)(Object(G.a)({},e),{},{modalOrder:t.item,openModal:!0}):"CLOSE_MODAL"===t.type?Object(G.a)(Object(G.a)({},e),{},{openModal:!1}):"USER_LOGGED_IN"===t.type?Object(G.a)(Object(G.a)({},e),{},{loggedIn:!0}):"USER_LOGGED_OUT"===t.type?Object(G.a)(Object(G.a)({},e),{},{loggedIn:!1}):"CLOSE_CURTAIN_MENU"===t.type?Object(G.a)(Object(G.a)({},e),{},{openMenu:!1}):"ADD_TO_CART_ITEM_SUM"===t.type?Object(G.a)(Object(G.a)({},e),{},{cartItemSum:e.cartItemSum+1}):e},Y=a(66),W=Object(z.c)(K,Object(z.a)(Y.a));c.a.render(o.a.createElement(o.a.StrictMode,null,o.a.createElement(m.a,{store:W},o.a.createElement(U,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},15:function(e,t,a){},18:function(e,t,a){e.exports=a.p+"static/media/logo.5d5d9eef.svg"},42:function(e,t,a){},67:function(e,t,a){e.exports=a(125)}},[[67,1,2]]]);
//# sourceMappingURL=main.990c34b3.chunk.js.map